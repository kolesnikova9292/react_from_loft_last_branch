(this["webpackJsonploft-taxi"]=this["webpackJsonploft-taxi"]||[]).push([[0],{112:function(e,t,a){e.exports=a(145)},117:function(e,t,a){},118:function(e,t,a){e.exports=a.p+"static/media/logo.ee7cd8ed.svg"},119:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){},145:function(e,t,a){"use strict";a.r(t);var n,r,c,o,u=a(0),i=a.n(u),s=a(23),l=a.n(s),m=(a(117),a(20)),d=a(36),p=(a(118),a(119),a(182)),f=a(187),b=a(188),O=a(189),v=a(185),j=a(64),h=a(28),g=a(11),E=a(194),x=a(31),y=a(198),w=Object(y.a)("GET_AUTH_REQUEST"),k=Object(y.a)("GET_AUTH_SUCCESS"),_=Object(y.a)("GET_AUTH_FAILURE"),S=Object(y.a)("LOGOUT_USER"),T=Object(y.a)("GET_REGISTRATION_REQUEST"),A=Object(y.a)("GET_REGISTRATION_SUCCESS"),C=Object(y.a)("GET_REGISTRATION_FAILURE"),F=Object(E.a)((n={},Object(g.a)(n,k,(function(e,t){return t.payload.data.token})),Object(g.a)(n,_,(function(){return null})),Object(g.a)(n,A,(function(e,t){return t.payload.data.token})),Object(g.a)(n,C,(function(){return null})),Object(g.a)(n,S,(function(){return null})),n),null),N=Object(E.a)((r={},Object(g.a)(r,k,(function(){return!0})),Object(g.a)(r,A,(function(){return!0})),Object(g.a)(r,_,(function(){return!1})),Object(g.a)(r,C,(function(){return!1})),Object(g.a)(r,S,(function(){return!1})),r),!1),R=Object(E.a)((c={},Object(g.a)(c,_,(function(e,t){return t.payload})),Object(g.a)(c,C,(function(e,t){return t.payload})),Object(g.a)(c,k,(function(){return null})),Object(g.a)(c,A,(function(){return null})),Object(g.a)(c,S,(function(){return null})),c),null),I=Object(x.c)({token:F,isAuthorized:N,error:R}),z=a(7),G=a.n(z),L=a(17),U=a(29),D=a.n(U),q=function(e){return e.auth.token},B=function(e){return e.auth.isAuthorized},P=function(e){return e.auth.error},V=Object(p.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},appbar:{backgroundColor:"#ffffff"}}})),$=Object(h.b)((function(e){return{isAuthorized:B(e)}}))((function(e){var t=V(),a=e.isAuthorized;return i.a.createElement("div",{className:t.root},i.a.createElement(v.a,{position:"static",className:t.appbar},i.a.createElement(f.a,null,i.a.createElement(j.Logo,{edge:"start",color:"inherit","aria-label":"menu"}),i.a.createElement(b.a,{variant:"h6",className:t.title}),!0===a?i.a.createElement(i.a.Fragment,null,i.a.createElement(O.a,{component:d.b,to:"/map",id:"my-map"},"\u041a\u0430\u0440\u0442\u0430"),i.a.createElement(O.a,{component:d.b,to:"/personal",id:"personal-area","data-testid":"personal-area"},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"),i.a.createElement(O.a,{component:d.b,to:"/logout",id:"logout"},"\u0412\u044b\u0439\u0442\u0438")):i.a.createElement(O.a,{component:d.b,to:"/login",id:"login"},"\u0412\u043e\u0439\u0442\u0438"))))})),J=a(101),W=Object(y.a)("GET_ROUTE"),Z=Object(y.a)("GET_ROUTE_SUCCESS"),K=Object(y.a)("GET_ROUTE__FAIL"),H=Object(y.a)("GET_ROUTE__CLEAN"),M=Object(y.a)("GET_ROUTE__CLEAN_SUCCESS"),Q=Object(E.a)((o={},Object(g.a)(o,Z,(function(e,t){return t.payload.data})),Object(g.a)(o,K,(function(){return null})),Object(g.a)(o,M,(function(){return null})),Object(g.a)(o,S,(function(){return null})),o),null),X=function(e){return e.route},Y=function(e,t){e.flyTo({center:t[0],zoom:15}),e.getLayer("route")&&e.removeLayer("route"),e.getSource("route")&&e.removeSource("route"),e.addLayer({id:"route",type:"line",source:{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:t}}},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#ffc617","line-width":8}})},ee=Object(h.b)((function(e){return{route:X(e)}}))((function(e){var t=e.route,a=Object(u.useState)({latitude:59.9342802,longitude:30.3350986,zoom:12,bearing:0,pitch:0}),n=Object(m.a)(a,2),r=n[0],c=n[1],o=i.a.createRef();return Object(u.useEffect)((function(){null!==t&&setTimeout(Y,1e3,o.current.getMap(),t)}),[t]),i.a.createElement(J.a,Object.assign({ref:o},r,{width:"auto",height:"89vh",mapStyle:"mapbox://styles/mapbox/streets-v9",onViewportChange:c,mapboxApiAccessToken:"pk.eyJ1IjoianVsaWFydXNzaWFuZmVkZXJhdGlvbiIsImEiOiJjazJpbmIxeHUwbTY2M2NtbHpxYW4weGZzIn0.-GVUqir7oT7vVGOU6OokLA"}))}));document.body.style.margin=0;var te,ae,ne,re,ce,oe=a(71),ue=(a(73),Object(y.a)("GET_LIST_OF_ADRESSES")),ie=Object(y.a)("GET_LIST_OF_ADRESSES_SUCCESS"),se=Object(y.a)("GET_LIST_OF_ADRESSES_FAIL"),le=Object(E.a)((te={},Object(g.a)(te,ie,(function(e,t){return t.payload.data.addresses})),Object(g.a)(te,se,(function(){return null})),te),null),me=function(e){return e.adresses},de=a(193),pe=a(195),fe=function(e){var t=e.point,a=e.handleOfChangePoint,n=e.listOfObjects,r=e.nameOfLabel,c=e.mark,o=i.a.useState(""),s=Object(m.a)(o,2),l=s[0],d=s[1],p=i.a.useState(""),f=Object(m.a)(p,2),b=f[0],O=f[1],v=i.a.useState(""),j=Object(m.a)(v,2),h=j[0],g=j[1];return Object(u.useEffect)((function(){""===l&&d(t),null!=l&&(O(l),g(l)),-1!==n.map((function(e){return e.adress})).indexOf(l)&&(localStorage.setItem(c,l),a(l))}),[t,l]),i.a.createElement(i.a.Fragment,null,i.a.createElement(pe.a,{value:b,onChange:function(e,t){O(t),d(t)},inputValue:h,onInputChange:function(e,t){g(t),d(t)},id:"combo-box-demo",options:n.map((function(e){return e.adress})),style:{width:300},renderInput:function(e){return i.a.createElement(de.a,Object.assign({},e,{label:r,variant:"outlined"}))}}))},be={fetchForListOfAdresses:ue},Oe=Object(h.b)((function(e){return{adressList:me(e)}}),be)((function(e){var t=Object(u.useState)(""),a=Object(m.a)(t,2),n=a[0],r=a[1],c=Object(u.useState)(""),o=Object(m.a)(c,2),s=o[0],l=o[1],d=Object(u.useState)([]),p=Object(m.a)(d,2),f=(p[0],p[1]),b=Object(u.useState)([]),v=Object(m.a)(b,2),j=v[0],h=v[1],g=Object(u.useState)([]),E=Object(m.a)(g,2),x=E[0],y=E[1],w=e.getPointsFromForm,k=e.adressList,_=e.fetchForListOfAdresses;function S(){return(S=Object(L.a)(G.a.mark((function e(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(u.useEffect)((function(){if(null!=localStorage.getItem("first_point")&&null!=localStorage.getItem("second_point")&&(r(localStorage.getItem("first_point")),l(localStorage.getItem("second_point"))),null==k)!function(){S.apply(this,arguments)}();else{var e=k.map((function(e,t){return{adress:e,key:t}}));f(e.map((function(e){return Object(oe.a)({},e)}))),h(e.map((function(e){return Object(oe.a)({},e)}))),y(e.map((function(e){return Object(oe.a)({},e)}))),""!==n&&null!=n&&(y(e.filter((function(e){return e.adress!==n}))),localStorage.setItem("first_point",n)),""!==s&&null!=s&&(h(e.filter((function(e){return e.adress!==s}))),localStorage.setItem("second_point",s))}}),[k,n,s]);return i.a.createElement("div",{className:"divForForm"},i.a.createElement("form",{onSubmit:function(e){e.preventDefault(),w({first_point:n,second_point:s})},className:"formWithFields"},i.a.createElement(fe,{point:n,handleOfChangePoint:function(e){r(e)},listOfObjects:j,nameOfLabel:"\u0422\u043e\u0447\u043a\u0430 \u0410",mark:"first_point"}),i.a.createElement("br",null),i.a.createElement(fe,{point:s,handleOfChangePoint:function(e){l(e)},listOfObjects:x,nameOfLabel:"\u0422\u043e\u0447\u043a\u0430 \u0412",mark:"second_point"}),i.a.createElement(O.a,{type:"submit",value:"\u0420\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u043c\u0430\u0440\u0448\u0440\u0443\u0442",className:"buttonForForm"},"\u0420\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u043c\u0430\u0440\u0448\u0440\u0443\u0442")))})),ve=function(){return i.a.createElement("div",{className:"divForForm"},i.a.createElement("div",{className:"warning"},"\u041f\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u044c \u0438 \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043a\u0430\u0440\u0442\u044b"),i.a.createElement(O.a,{value:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u044c",className:"buttonForWarning",variant:"contained",color:"primary",component:d.b,to:"/personal"},"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u044c"))},je=function(e){return e.bankCard.number},he=function(e){return e.bankCard.validity},ge=function(e){return e.bankCard.owner},Ee=function(e){return e.bankCard.cvc},xe=function(e){return e.bankCard},ye=Object(y.a)("GET_BANK_CARD_DATA"),we=Object(y.a)("GET_BANK_CARD_DATA_SUCCESS"),ke=Object(y.a)("GET_BANK_CARD_DATA_FAIL"),_e=Object(y.a)("REGISTRATE_BANK_CARD"),Se=Object(y.a)("REGISTRATE_BANK_CARD_SUCCESS"),Te=Object(y.a)("REGISTRATE_BANK_CARD_FAIL"),Ae=Object(E.a)((ae={},Object(g.a)(ae,we,(function(e,t){return t.payload.data.cardNumber})),Object(g.a)(ae,ke,(function(){return null})),Object(g.a)(ae,Se,(function(e,t){return t.payload.cardNumber})),Object(g.a)(ae,Te,(function(){return null})),ae),null),Ce=Object(E.a)((ne={},Object(g.a)(ne,we,(function(e,t){return t.payload.data.expiryDate})),Object(g.a)(ne,ke,(function(){return null})),Object(g.a)(ne,Se,(function(e,t){return t.payload.expiryDate})),Object(g.a)(ne,Te,(function(){return null})),ne),null),Fe=Object(E.a)((re={},Object(g.a)(re,we,(function(e,t){return t.payload.data.cardName})),Object(g.a)(re,ke,(function(){return null})),Object(g.a)(re,Se,(function(e,t){return t.payload.cardName})),Object(g.a)(re,Te,(function(){return null})),re),null),Ne=Object(E.a)((ce={},Object(g.a)(ce,we,(function(e,t){return t.payload.data.cvc})),Object(g.a)(ce,ke,(function(){return null})),Object(g.a)(ce,Se,(function(e,t){return t.payload.cvc})),Object(g.a)(ce,Te,(function(){return null})),ce),null),Re=Object(x.c)({number:Ae,validity:Ce,owner:Fe,cvc:Ne}),Ie={fetchBankCardInformation:ye,fetchForRoute:W,fetchForRouteClean:H},ze=Object(h.b)((function(e){return{token:q(e),bankCard:xe(e),route:X(e)}}),Ie)((function(e){var t=e.token,a=e.bankCard,n=e.fetchBankCardInformation,r=e.fetchForRoute,c=e.fetchForRouteClean;e.route;function o(){return(o=Object(L.a)(G.a.mark((function e(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}localStorage.setItem("accessToken",t),Object(u.useEffect)((function(){!function(){o.apply(this,arguments)}()}),[a]);var s=function(){var e=Object(L.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:return e.next=4,r(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(L.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement("div",{className:"main"},i.a.createElement(ee,null),i.a.createElement("div",{className:"divForFormOuter"},null!=a.number&&null!=a.cvc?i.a.createElement(Oe,{getPointsFromForm:l}):i.a.createElement(ve,null)))})),Ge=a(191),Le=(a(142),a(41)),Ue=a(43),De=a(197),qe={fetchRegistrateMyBankCard:_e,fetchBankCardInformation:ye};function Be(e){return void 0!==e&&"required"===e.type?"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e":void 0!==e&&"pattern"===e.type?"\u041d\u0435\u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442":null}var Pe=Object(h.b)((function(e){return{token:q(e),cardNumber:je(e),validity:he(e),owner:ge(e),cvc:Ee(e)}}),qe)((function(e){var t=e.fetchRegistrateMyBankCard,a=e.token,n=e.fetchBankCardInformation,r=e.cardNumber,c=e.validity,o=e.owner,s=e.cvc,l=Object(Le.a)(),d=l.register,p=l.handleSubmit,f=l.errors,b=l.reset,v=l.setValue,j=Object(u.useState)(!1),h=Object(m.a)(j,2),g=h[0],E=h[1],x=Object(u.useState)(!1),y=Object(m.a)(x,2),w=y[0],k=y[1],_=Object(u.useState)(""),S=Object(m.a)(_,2),T=S[0],A=S[1];function C(){return(C=Object(L.a)(G.a.mark((function e(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(a);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(u.useEffect)((function(){null==r&&function(){C.apply(this,arguments)}(),v("cardNumber",r),v("validity",c),v("owner",o),v("cvc",s),!0===w&&(r.length>0&&c.length>0?(A("\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u0431\u0430\u043d\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043a\u0430\u0440\u0442\u044b \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e"),E(!0)):(A("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0431\u0430\u043d\u043a\u043e\u0432\u0441\u043a\u0443\u044e \u043a\u0430\u0440\u0442\u0443"),E(!0)))}),[r,c,o,s,b,v]);var F=function(){var n=Object(L.a)(G.a.mark((function n(r){var c,o,u,i;return G.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=r.cardNumber,o=r.validity,u=r.owner,i=r.cvc,k(!0),n.next=4,t({cardNumber:c,validity:o,owner:u,cvc:i,token:a});case 4:e.history.push("/personal");case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return i.a.createElement("div",{className:"commonDiv"},i.a.createElement("form",{className:"myForm",onSubmit:p(F)},i.a.createElement("div",{className:"divForFormPersonal"},i.a.createElement("div",{className:"divForFormPersonalChild"},i.a.createElement(Ge.a,null,i.a.createElement(Ue.a,{as:i.a.createElement(de.a,{label:"\u041d\u043e\u043c\u0435\u0440 \u043a\u0430\u0440\u0442\u044b",color:"secondary",type:"text",className:"textField",error:null!=f.cardNumber}),onChange:function(e){var t=e.target.value;t||(e.target.value="");var a=t.replace(/\D/g,"").substring(0,16).match(/.{1,4}/g)||[];e.target.value=a.join(" "),v("cardNumber",e.target.value)},rules:{required:!0,pattern:/^\d{4} \d{4} \d{4} \d{4}$/i},helperText:Be(f.cardNumber),name:"cardNumber",register:d,setValue:v,"data-testid":"test_cardNumber_field"}),i.a.createElement(Ue.a,{as:i.a.createElement(de.a,{label:"\u0421\u0440\u043e\u043a \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f",color:"secondary",type:"text",className:"textField",error:null!=f.validity}),rules:{required:!0,pattern:/^(0[1-9]|1[0-2])\/([0-9]{2})$/i},helperText:Be(f.validity),name:"validity",onChange:function(e){var t=e.target.value;t||(e.target.value="");var a=t.replace(/\D/g,"").substring(0,4).match(/.{1,2}/g)||[];e.target.value=a.join("/"),v("validity",e.target.value)},register:d,setValue:v,"data-testid":"test_validity_field"}))),i.a.createElement("div",{className:"divForFormPersonalChild"},i.a.createElement(Ge.a,null,i.a.createElement(Ue.a,{as:i.a.createElement(de.a,{label:"\u0418\u043c\u044f \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430",color:"secondary",type:"text",className:"textField",error:null!=f.owner}),onChange:function(e){var t=e.target.value;t||(e.target.value="");var a=t.replace(/\d/g,"").toUpperCase();v("owner",a)},rules:{required:!0,pattern:/^[A-Z]* [A-Z]*$/i},helperText:Be(f.owner),name:"owner",register:d,setValue:v,"data-testid":"test_owner_field"}),i.a.createElement(Ue.a,{as:i.a.createElement(de.a,{label:"CVC",color:"secondary",type:"text",className:"textField",error:null!=f.cvc}),onChange:function(e){var t=e.target.value;t||(e.target.value="");var a=t.replace(/\D/g,"").substring(0,3);v("cvc",a)},rules:{required:!0,pattern:/^\d{3}$/i},helperText:Be(f.cvc),name:"cvc",register:d,setValue:v,"data-testid":"test_cvc_field"})))),i.a.createElement(O.a,{type:"submit",value:"\u0412\u043e\u0439\u0442\u0438",className:"myButton"},"\u0421\u041e\u0425\u0420\u0410\u041d\u0418\u0422\u042c")),i.a.createElement(De.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:g,onClose:function(){E(!1)},ContentProps:{"aria-describedby":"message-id"},message:i.a.createElement("span",{id:"message-id"},T)}))})),Ve=function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement(Pe,e))},$e=(a(143),a(25)),Je={fetchAuthRequest:w,logoutUser:S},We=Object(h.b)((function(e){return{isAuthorized:B(e),error:P(e)}}),Je)((function(e){var t=e.fetchAuthRequest,a=e.logoutUser,n=e.isAuthorized,r=e.error,c=Object(Le.a)(),o=c.register,s=c.handleSubmit,l=c.errors,d=c.setValue,p=Object(u.useState)(!1),f=Object(m.a)(p,2),b=f[0],v=f[1];if(Object(u.useEffect)((function(){d("login","email@example.com"),d("password","password"),!0===n&&e.history.push("/map"),null!=r&&v(!0)}),[n,r,d]),!0===e.goAway)return window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u044b\u0439\u0442\u0438?")?(a(),localStorage.removeItem("accessToken"),localStorage.removeItem("first_point"),localStorage.removeItem("second_point"),i.a.createElement($e.a,{to:"/login"})):i.a.createElement($e.a,{to:"/map"});var j=function(){var e=Object(L.a)(G.a.mark((function e(a){var n,r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.login,r=a.password,e.next=3,t({login:n,password:r});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement("div",{className:"divForForm"},i.a.createElement(Ge.a,{className:"cardForForm"},i.a.createElement("form",{onSubmit:s(j)},i.a.createElement(Ue.a,{as:i.a.createElement(de.a,{className:"textFieldForLoginForm",label:"\u041b\u043e\u0433\u0438\u043d",color:"secondary",type:"text",error:null!=l.login}),rules:{required:!0,pattern:/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$/i},helperText:Ze(l.login),name:"login",register:o,setValue:d}),i.a.createElement("br",null),i.a.createElement(Ue.a,{as:i.a.createElement(de.a,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",color:"secondary",type:"text",className:"textFieldForLoginForm",error:null!=l.password}),helperText:Ze(l.password),rules:{required:!0},name:"password",register:o,setValue:d}),i.a.createElement("br",null),i.a.createElement(O.a,{type:"submit",value:"\u0412\u043e\u0439\u0442\u0438"},"\u0412\u043e\u0439\u0442\u0438")),i.a.createElement(O.a,{onClick:function(t){t.preventDefault(),e.history.push("/registration")}},"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044e")),i.a.createElement(De.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:b,onClose:function(){v(!1)},ContentProps:{"aria-describedby":"message-id"},message:i.a.createElement("span",{id:"message-id"},r)}))}));function Ze(e){return void 0!==e&&"required"===e.type?"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e":void 0!==e&&"pattern"===e.type?"\u041d\u0435\u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442":null}var Ke=function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement(We,e))},He=(a(144),{fetchRegistrationRequest:T}),Me=Object(h.b)((function(e){return{isAuthorized:B(e),error:P(e)}}),He)((function(e){var t=e.fetchRegistrationRequest,a=e.error,n=e.isAuthorized,r=Object(Le.a)(),c=r.register,o=r.handleSubmit,s=r.errors,l=Object(u.useState)(!1),d=Object(m.a)(l,2),p=d[0],f=d[1];Object(u.useEffect)((function(){!0===n&&e.history.push("/map"),null!=a&&f(!0)}),[n,a,p]);var b=function(){var e=Object(L.a)(G.a.mark((function e(a){var n,r,c,o;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=a.login,r=a.password,c=a.firstname,o=a.lastname,e.next=4,t({email:n,password:r,name:c,surname:o});case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement("div",{className:"divForForm"},i.a.createElement(Ge.a,{className:"cardForForm"},i.a.createElement("form",{onSubmit:o(b)},i.a.createElement(de.a,{id:"standard-secondary",label:"\u041b\u043e\u0433\u0438\u043d",color:"secondary",type:"text",name:"login",error:null!=s.login,inputRef:c({required:!0,pattern:/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$/i}),"data-testid":"test_login_field",helperText:Ze(s.login)}),i.a.createElement(de.a,{id:"standard-secondary",label:"\u041f\u0430\u0440\u043e\u043b\u044c",color:"secondary",type:"text",name:"password","data-testid":"test_password_field",error:null!=s.password,inputRef:c({required:!0}),helperText:Ze(s.password)}),i.a.createElement(de.a,{id:"standard-secondary",label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",color:"secondary",type:"text",name:"lastname","data-testid":"test_lastname_field",error:null!=s.lastname,inputRef:c({required:!0,pattern:/^[\u0430-\u044f\u0410-\u042f\u0451\u0401a-zA-Z '.-]*$/i}),helperText:Ze(s.lastname)}),i.a.createElement(de.a,{id:"standard-secondary",label:"\u0418\u043c\u044f",color:"secondary",type:"text",name:"firstname","data-testid":"test_firstname_field",error:null!=s.firstname,inputRef:c({required:!0,pattern:/^[\u0430-\u044f\u0410-\u042f\u0451\u0401a-zA-Z '.-]*$/i}),helperText:Ze(s.firstname)}),i.a.createElement("div",null,i.a.createElement(O.a,{type:"submit",value:""},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")))),i.a.createElement(De.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:p,onClose:function(){f(!1)},ContentProps:{"aria-describedby":"message-id"},message:i.a.createElement("span",{id:"message-id"},a)}))})),Qe=function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement(Me,e))},Xe=a(103),Ye=function(e){var t=e.component,a=e.isAuthorized,n=e.loginPath,r=Object(Xe.a)(e,["component","isAuthorized","loginPath"]);return i.a.createElement($e.b,Object.assign({},r,{render:function(e){return a?i.a.createElement(t,e):i.a.createElement($e.a,{to:n})}}))},et=Object(h.b)((function(e){return{isAuthorized:B(e)}}))((function(e){var t=e.isAuthorized;return i.a.createElement(i.a.Fragment,null,i.a.createElement($e.d,null,i.a.createElement(Ye,{path:"/map",component:ze,exact:!0,isAuthorized:t,loginPath:"/login"}),i.a.createElement(Ye,{path:"/personal",component:Ve,exact:!0,isAuthorized:t,loginPath:"/login"}),i.a.createElement($e.b,{path:"/registration",component:Qe,exact:!0}),i.a.createElement($e.b,{path:"/login",component:Ke,exact:!0}),i.a.createElement($e.b,{path:"/logout",render:function(e){return i.a.createElement(Ke,Object.assign({},e,{goAway:!0}))},exact:!0}),i.a.createElement($e.b,{path:"/",component:1==t?ze:Ke,exact:!0}),i.a.createElement($e.a,{to:"/"})))})),tt=function(){var e=Object(u.useState)(4),t=Object(m.a)(e,2);t[0],t[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.a,null,i.a.createElement($,null),i.a.createElement(et,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var at=a(192),nt=a(100),rt=Object(x.c)({auth:I,bankCard:Re,adresses:le,route:Q}),ct=a(102),ot=a(16),ut=G.a.mark(st),it=G.a.mark(lt);function st(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ot.d)(w,lt);case 2:case"end":return e.stop()}}),ut)}function lt(e){var t,a,n,r;return G.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,t=e.payload,a=t.login,n=t.password,c.next=4,Object(ot.b)(mt,a,n);case 4:if(!0!==(r=c.sent).data.success){c.next=10;break}return c.next=8,Object(ot.c)(k(r));case 8:c.next=12;break;case 10:return c.next=12,Object(ot.c)(_(r.data.error));case 12:c.next=17;break;case 14:c.prev=14,c.t0=c.catch(0),Object(ot.c)(_(c.t0));case 17:case"end":return c.stop()}}),it,null,[[0,14]])}var mt=function(e,t){return D.a.post("https://loft-taxi.glitch.me/auth",{email:e,password:t},{headers:{"Content-Type":"application/json"}})},dt=G.a.mark(ft),pt=G.a.mark(bt);function ft(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ot.d)(T,bt);case 2:case"end":return e.stop()}}),dt)}function bt(e){var t,a,n,r,c,o;return G.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,t=e.payload,a=t.email,n=t.password,r=t.name,c=t.surname,u.next=4,Object(ot.b)(Ot,a,n,r,c);case 4:if(!0!==(o=u.sent).data.success){u.next=10;break}return u.next=8,Object(ot.c)(A(o));case 8:u.next=12;break;case 10:return u.next=12,Object(ot.c)(C(o.data.error));case 12:u.next=17;break;case 14:u.prev=14,u.t0=u.catch(0),Object(ot.c)(C(u.t0));case 17:case"end":return u.stop()}}),pt,null,[[0,14]])}var Ot=function(e,t,a,n){return D.a.post("https://loft-taxi.glitch.me/register",{email:e,password:t,name:a,surname:n},{headers:{"Content-Type":"application/json"}})},vt=G.a.mark(gt),jt=G.a.mark(Et),ht=G.a.mark(xt);function gt(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ot.d)(_e,xt);case 2:return e.next=4,Object(ot.d)(ye,Et);case 4:case"end":return e.stop()}}),vt)}function Et(e){var t;return G.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e.payload.token,a.next=4,Object(ot.b)(wt,e.payload);case 4:if(200!==(t=a.sent).status){a.next=10;break}return a.next=8,Object(ot.c)(we(t));case 8:a.next=12;break;case 10:return a.next=12,Object(ot.c)(ke(t.data.error));case 12:a.next=17;break;case 14:a.prev=14,a.t0=a.catch(0),ke(a.t0);case 17:case"end":return a.stop()}}),jt,null,[[0,14]])}function xt(e){var t,a,n,r,c,o,u,i;return G.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,t=e.payload,a=t.cardNumber,n=t.validity,r=t.owner,c=t.cvc,o=t.token,s.next=4,Object(ot.b)(yt,a,n,r,c,o);case 4:if(200!==(u=s.sent).status){s.next=9;break}return i=JSON.parse(u.config.data),s.next=9,Object(ot.c)(Se(i));case 9:s.next=14;break;case 11:s.prev=11,s.t0=s.catch(0),Object(ot.c)(Te(s.t0));case 14:case"end":return s.stop()}}),ht,null,[[0,11]])}var yt=function(){var e=Object(L.a)(G.a.mark((function e(t,a,n,r,c){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("https://loft-taxi.glitch.me/card",{cardNumber:t,expiryDate:a,cardName:n,cvc:r,token:c},{"Content-Type":"application/json"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a,n,r,c){return e.apply(this,arguments)}}(),wt=function(){var e=Object(L.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.get("https://loft-taxi.glitch.me/card?token="+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),kt=G.a.mark(St),_t=G.a.mark(Tt);function St(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ot.d)(ue,Tt);case 2:case"end":return e.stop()}}),kt)}function Tt(){var e;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(ot.b)(At);case 3:if(200!==(e=t.sent).status){t.next=9;break}return t.next=7,Object(ot.c)(ie(e));case 7:t.next=11;break;case 9:return t.next=11,Object(ot.c)(se());case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),Object(ot.c)(se());case 16:case"end":return t.stop()}}),_t,null,[[0,13]])}var At=function(){var e=Object(L.a)(G.a.mark((function e(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.get("https://loft-taxi.glitch.me/addressList");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ct=G.a.mark(Rt),Ft=G.a.mark(It),Nt=G.a.mark(zt);function Rt(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ot.d)(W,It);case 2:return e.next=4,Object(ot.d)(H,zt);case 4:case"end":return e.stop()}}),Ct)}function It(e){var t;return G.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(ot.b)(Gt,e.payload.first_point,e.payload.second_point);case 3:if(200!==(t=a.sent).status){a.next=9;break}return a.next=7,Object(ot.c)(Z(t));case 7:a.next=11;break;case 9:return a.next=11,Object(ot.c)(K());case 11:a.next=16;break;case 13:a.prev=13,a.t0=a.catch(0),Object(ot.c)(K());case 16:case"end":return a.stop()}}),Ft,null,[[0,13]])}function zt(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ot.c)(M());case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(ot.c)(K(e.t0));case 8:case"end":return e.stop()}}),Nt,null,[[0,5]])}var Gt=function(){var e=Object(L.a)(G.a.mark((function e(t,a){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.get("https://loft-taxi.glitch.me/route?address1=".concat(t,"&address2=").concat(a));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Lt=G.a.mark(Ut);function Ut(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ot.a)([st(),ft(),gt(),St(),Rt()]);case 2:case"end":return e.stop()}}),Lt)}var Dt=Object(ct.a)(),qt={auth:{token:void 0==localStorage.getItem("accessToken")?null:localStorage.getItem("accessToken"),isAuthorized:void 0!=localStorage.getItem("accessToken"),error:null},bankCard:{number:null,validity:null,owner:null,cvc:null},adresses:null,route:null},Bt=Object(x.e)(rt,qt,Object(x.d)(Object(x.a)(nt.a),Object(x.a)(Dt)));Dt.run(Ut);var Pt=Bt;l.a.render(i.a.createElement(at.a,{theme:j.theme},i.a.createElement(h.a,{store:Pt},i.a.createElement(tt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},73:function(e,t,a){}},[[112,1,2]]]);
//# sourceMappingURL=main.d10ca446.chunk.js.map